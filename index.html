<html>
<head>
  <title>PropertyCross</title>

</head>
<body>


  <form id="search-form">
    <input type="text" name="query">
       
       <button>ok</button>
    </form>  

     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.js"></script>

     <script>

     (function() {
    var nestoriaApi = {
      url = 'http://api.nestoria.co.uk/api?' + 
            'country=uk&pretty=1&action=search_listings&' + 
            'encoding=json&listing_type=buy&page=1&' + 
            'number_of_results=6';
    
    var nestoriaApi = {
      getLocation: function (placeName, successCallback, errorCallback){
        $.ajax({
            url: url + '&place_name=' + placeName,
            dataType:'jsonp',
            success: successCallback,
            error: errorCallback
          });
         }
    };
      global.nestoriaApi = nestoriaApi;
  })(window);



     $(function(){ //document ready

        var $searchForm=$('#search-form');
        //находим input
        var $query=$('#query');

        //coздаем функцию колбек для submit формы
       function onSubmitHandler (event){
          //this - объект элемента на котором произошло событие
          var inputValue = $query.val();
            
         
          console.log('onSubmitHandler', inputValue);

          var error, success;
          error = function(data) {
            console.log(data);
          },
          success = error;

          nestoriaApi.getLocations(inputValue, success, error);
          
          event.preventDefault();
        };

        $searchForm.on('submit', onSubmitHandler);
             
     });


     </script>
    
    </body>
</html>